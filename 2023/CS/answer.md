# 2023

## 1. C 语言执行效率措施

> 从 C 语言执行效率方便，简述下 C 语言采取了哪些措施提高执行效率。

C 语言通过以下措施提高执行效率：

- **编译型语言**：直接编译为机器码，减少解释执行的中间开销。
- **静态类型检查**：编译时确定类型，避免运行时类型判断。
- **指针和直接内存操作**：允许直接操作内存地址，减少数据拷贝。
- **底层控制**：支持寄存器变量、内联函数等优化，减少函数调用开销。
- **内存对齐**：通过结构体对齐优化内存访问速度。
- **高效循环和条件语句**：提供灵活的循环和跳转控制（如 `goto`），减少冗余操作。

---

## 2. 内存分配分析

> 根据下面的代码，填写表格。整数算 2 字节，字符 2 字节，指针 4 字节。每个区域的起始地址都是 0，内存按 2 字节编址。

```c
int num=2;

void main()
{
    char str1[2018] = {"UESTC"}; // 不记得这里几个字符了，反正就是要乘 2
    char* str2 = "CHENGDU";
    char p;
}

void func(int m)
{
    static int sta;
    int n = 10;
}
```

| 内存区域     | 常量或变量名       | 占用内存大小 |
|--------------|--------------------|--------------|
| 常量区       | `"CHENGDU"`        | 16 字节      |
| 常量区       | `"UESTC"`          | 12 字节      |
| 全局区       | `num`              | 2 字节       |
| 静态数据区   | `sta`（`func`中的静态变量） | 2 字节       |
| main 函数    | `str1[2018]`       | 4036 字节    |
| main 函数    | `str2`（指针）     | 4 字节       |
| main 函数    | `p`                | 2 字节       |
| func 函数    | `n`                | 2 字节       |
| func 函数    | `m`                | 2 字节       |

### **内存区域划分说明**

- **常量区**：存储字符串字面量（如 `"CHENGDU"`、`"UESTC"`）等只读数据。
- **全局区**：存储全局变量（如 `num`）。
- **静态数据区**：存储静态变量（如 `sta`）。
- **栈区**：存储函数内的局部变量、参数和指针（如 `str1`、`str2`、`p`、`n`、`m`）。

### **变量与常量的具体分配**

#### **1. 常量区**

| 变量/常量         | 大小计算                     | 占用内存大小 |
|-------------------|-----------------------------|--------------|
| `"CHENGDU"`       | 字符串长度：7字符 + `\0` = 8字符 × 2字节/字符 | **16 字节**  |
| `"UESTC"`         | 字符串长度：5字符 + `\0` = 6字符 × 2字节/字符 | **12 字节**  |

**说明**：

- 字符串字面量存储在只读的常量区。
- `str1` 数组的初始化值 `"UESTC"` 会从常量区拷贝到栈区，但原字符串仍存在于常量区。

#### **2. 全局区**

| 变量              | 类型         | 大小计算          | 占用内存大小 |
|-------------------|-------------|-------------------|--------------|
| `num`             | `int`       | `sizeof(int) = 2` | **2 字节**   |

**说明**：

- 全局变量 `num` 在程序启动时分配内存，生命周期持续到程序结束。

#### **3. 静态数据区**

| 变量              | 类型         | 大小计算          | 占用内存大小 |
|-------------------|-------------|-------------------|--------------|
| `sta`（静态变量） | `static int`| `sizeof(int) = 2` | **2 字节**   |

**说明**：

- `sta` 是 `func` 函数内的静态变量，存储在静态数据区，与函数调用无关，生命周期同全局变量。

#### **4. 栈区（`main` 函数）**

| 变量              | 类型           | 大小计算                     | 占用内存大小 |
|-------------------|---------------|-----------------------------|--------------|
| `str1[2018]`      | `char[]`      | `2018元素 × 2字节/字符`      | **4036 字节**|
| `str2`（指针）    | `char*`       | `sizeof(指针) = 4`          | **4 字节**   |
| `p`               | `char`        | `sizeof(char) = 2`          | **2 字节**   |

**说明**：

- `str1` 是局部数组，在 `main` 函数栈中分配，初始化时从常量区***拷贝*** `"UESTC"` 并填充剩余空间为 `0`。
- `str2` 是指针变量，指向常量区的 `"CHENGDU"`，自身占 4 字节（指针大小）。

---

#### **5. 栈区（`func` 函数）**

| 变量              | 类型         | 大小计算          | 占用内存大小 |
|-------------------|-------------|-------------------|--------------|
| `n`               | `int`       | `sizeof(int) = 2` | **2 字节**   |
| `m`（参数）       | `int`       | `sizeof(int) = 2` | **2 字节**   |

**说明**：

- `n` 是局部变量，`m` 是函数参数，均在 `func` 被调用时在栈区分配内存，函数返回后释放。

---

### **关键错误修正**

- **数值字面量（如 `10`、`2018`、`2`）不存储在常量区**，而是直接嵌入代码或通过变量存储。
  - 例如：`2018` 是数组大小信息，存在于编译后的符号表中，不单独占用内存；`num=2` 的 `2` 存储在全局变量 `num` 的内存中。

---

### **总结表格**

| 内存区域     | 变量/常量名              | 大小       |
|--------------|--------------------------|------------|
| 常量区       | `"CHENGDU"`              | 16 字节    |
| 常量区       | `"UESTC"`                | 12 字节    |
| 全局区       | `num`                    | 2 字节     |
| 静态数据区   | `sta`（`func`中的静态变量）| 2 字节    |
| main 栈区    | `str1[2018]`             | 4036 字节  |
| main 栈区    | `str2`（指针）           | 4 字节     |
| main 栈区    | `p`                      | 2 字节     |
| func 栈区    | `n`                      | 2 字节     |
| func 栈区    | `m`                      | 2 字节     |

---

**注**：内存分配基于题目假设（`int` 和 `char` 占 2 字节，指针占 4 字节）。实际实现可能因编译器和平台而异。

---

## 3. 循环结构分析

> `For(int i=0; nums[i] != temp; i++){printf("%d", i);}` 是什么结构? 使用显示结构语言该如何表示? 并标出条件跳转和强制跳转。

1. **结构类型**：条件分支结构（选择结构）。
2. **显示结构语言表示**：

   ```plaintext
   i = 0
   条件跳转（循环入口）：
     若 nums[i] == temp → 强制跳转到循环结束
     否则执行循环体：
         printf("%d", i)
         i++
         强制跳转回循环入口
   循环结束
   ```

3. **跳转标注**：
   - **条件跳转**：检查 `nums[i] != temp`，若条件不满足则跳出循环。
   - **强制跳转**：循环体执行后无条件跳转回循环入口。

---

## 4. 数组查找问题

在一个 array 数组里面找 item 变量

```c
scanf("%d", &item);
for (int numb = 0; array[numb] != item; numb++);
printf("%d", numb);
```
